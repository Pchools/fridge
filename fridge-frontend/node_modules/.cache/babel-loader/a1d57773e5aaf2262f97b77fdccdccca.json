{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\Pchal\\\\cs_projects\\\\fridge\\\\fridge-frontend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\Pchal\\\\cs_projects\\\\fridge\\\\fridge-frontend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\Pchal\\\\cs_projects\\\\fridge\\\\fridge-frontend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\Pchal\\\\cs_projects\\\\fridge\\\\fridge-frontend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\Pchal\\\\cs_projects\\\\fridge\\\\fridge-frontend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\Pchal\\\\cs_projects\\\\fridge\\\\fridge-frontend\\\\src\\\\components\\\\withAuth.js\";\nimport React, { Component } from 'react';\nimport AuthService from './authService';\nimport { Redirect } from \"react-router-dom\";\nexport default function withAuth(AuthComponent) {\n  // Code here now\n  var Auth = new AuthService('http://localhost:4000');\n  return (\n    /*#__PURE__*/\n    function (_Component) {\n      _inherits(AuthWrapped, _Component);\n\n      function AuthWrapped() {\n        var _this;\n\n        _classCallCheck(this, AuthWrapped);\n\n        _this = _possibleConstructorReturn(this, _getPrototypeOf(AuthWrapped).call(this));\n        _this.state = {\n          user: null\n        };\n        return _this;\n      }\n\n      _createClass(AuthWrapped, [{\n        key: \"componentWillMount\",\n        value: function componentWillMount() {\n          if (!Auth.loggedIn()) {\n            //this.props.history.replace('/login')\n            return React.createElement(Redirect, {\n              to: \"/login\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 20\n              },\n              __self: this\n            });\n          } else {\n            try {\n              var profile = Auth.getProfile();\n              this.setState({\n                user: profile\n              });\n            } catch (err) {\n              Auth.logout();\n              this.props.history.replace('/login');\n            }\n          }\n        }\n      }, {\n        key: \"render\",\n        value: function render() {\n          if (this.state.user) {\n            return React.createElement(AuthComponent, {\n              history: this.props.history,\n              user: this.state.user,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 39\n              },\n              __self: this\n            });\n          } else {\n            return null;\n          }\n        }\n      }]);\n\n      return AuthWrapped;\n    }(Component)\n  );\n}","map":{"version":3,"sources":["C:\\Users\\Pchal\\cs_projects\\fridge\\fridge-frontend\\src\\components\\withAuth.js"],"names":["React","Component","AuthService","Redirect","withAuth","AuthComponent","Auth","state","user","loggedIn","profile","getProfile","setState","err","logout","props","history","replace"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,WAAP,MAAwB,eAAxB;AACA,SAASC,QAAT,QAAyB,kBAAzB;AAGA,eAAe,SAASC,QAAT,CAAkBC,aAAlB,EAAiC;AAC5C;AACA,MAAMC,IAAI,GAAG,IAAIJ,WAAJ,CAAgB,uBAAhB,CAAb;AACA;AAAA;AAAA;AAAA;;AACC,6BAAc;AAAA;;AAAA;;AACb;AACA,cAAKK,KAAL,GAAa;AACTC,UAAAA,IAAI,EAAE;AADG,SAAb;AAFa;AAKhB;;AANC;AAAA;AAAA,6CAQmB;AACjB,cAAI,CAACF,IAAI,CAACG,QAAL,EAAL,EAAsB;AAClB;AACA,mBAAO,oBAAC,QAAD;AAAU,cAAA,EAAE,EAAC,QAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAAP;AACH,WAHD,MAIK;AACD,gBAAI;AACA,kBAAMC,OAAO,GAAGJ,IAAI,CAACK,UAAL,EAAhB;AACA,mBAAKC,QAAL,CAAc;AACVJ,gBAAAA,IAAI,EAAEE;AADI,eAAd;AAGN,aALE,CAMA,OAAMG,GAAN,EAAU;AACNP,cAAAA,IAAI,CAACQ,MAAL;AACA,mBAAKC,KAAL,CAAWC,OAAX,CAAmBC,OAAnB,CAA2B,QAA3B;AACH;AACJ;AACJ;AAzBC;AAAA;AAAA,iCA2BO;AACP,cAAI,KAAKV,KAAL,CAAWC,IAAf,EAAqB;AACjB,mBACI,oBAAC,aAAD;AAAe,cAAA,OAAO,EAAE,KAAKO,KAAL,CAAWC,OAAnC;AAA4C,cAAA,IAAI,EAAE,KAAKT,KAAL,CAAWC,IAA7D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADJ;AAGH,WAJD,MAKK;AACD,mBAAO,IAAP;AACH;AAEA;AArCD;;AAAA;AAAA,MAAiCP,SAAjC;AAAA;AAuCH","sourcesContent":["import React, { Component } from 'react';\r\nimport AuthService from './authService';\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\n\r\nexport default function withAuth(AuthComponent) {\r\n    // Code here now\r\n    const Auth = new AuthService('http://localhost:4000');\r\n    return class AuthWrapped extends Component {\r\n\t    constructor() {\r\n\t\t    super();\r\n\t\t    this.state = {\r\n\t\t        user: null\r\n\t\t    }\r\n\t\t}\r\n\r\n\t\tcomponentWillMount() {\r\n\t\t    if (!Auth.loggedIn()) {\r\n\t\t        //this.props.history.replace('/login')\r\n\t\t        return <Redirect to='/login'/>;\r\n\t\t    }\r\n\t\t    else {\r\n\t\t        try {\r\n\t\t            const profile = Auth.getProfile()\r\n\t\t            this.setState({\r\n\t\t                user: profile\r\n\t\t            })\r\n\t\t    \t}\r\n\t\t        catch(err){\r\n\t\t            Auth.logout()\r\n\t\t            this.props.history.replace('/login')\r\n\t\t        }\r\n    \t\t}\r\n\t\t}\r\n\r\n\t\trender() {\r\n    if (this.state.user) {\r\n        return (\r\n            <AuthComponent history={this.props.history} user={this.state.user} />\r\n        )\r\n    }\r\n    else {\r\n        return null\r\n    }\r\n\r\n    }\r\n}\r\n}"]},"metadata":{},"sourceType":"module"}